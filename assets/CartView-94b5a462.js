import{_ as C,c,a as t,F as v,u as y,A as I,x as a,b as p,w as h,r as m,o as d,e as g,y as $,z as k,p as w,f as V}from"./index-a97ecb40.js";const{VITE_APP_URL:l,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"qqq-suitcase",BASE_URL:"/suitcase/",MODE:"production",DEV:!1,PROD:!0},P={data(){return{products:[],productId:"",cart:[],loadingItem:""}},methods:{getCarts(){this.$http.get(`${l}/v2/api/${i}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>{console.log(e)})},updataCartItem(e){const o={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${l}/v2/api/${i}/cart/${e.id}`,{data:o}).then(r=>{this.getCarts(),this.loadingItem=""}).catch(r=>{console.log(r)})},deleteItem(e){this.loadingItem=e.id,this.$http.delete(`${l}/v2/api/${i}/cart/${e.id}`).then(o=>{this.getCarts(),this.loadingItem=""}).catch(o=>{console.log(o)})},deleteCarts(){this.$http.delete(`${l}/v2/api/${i}/carts`).then(e=>{this.getCarts()}).catch(e=>{console.log(e)})}},mounted(){this.getCarts()}},b=e=>(w("data-v-fcf54252"),e=e(),V(),e),A={class:"container"},E={class:"text-end"},q={class:"table align-middle"},T=b(()=>t("thead",null,[t("tr",null,[t("th",{style:{width:"5%"}}),t("th",{style:{width:"20%"}}),t("th",{style:{width:"50%"}},"品名"),t("th",{style:{width:"20%"}},"數量/單位"),t("th",null,"單價")])],-1)),L=["onClick"],R=b(()=>t("i",{class:"fas fa-spinner fa-pulse"},null,-1)),S={class:"A-img"},U=["src"],B={type:"button",class:"btn"},D={class:"input-group input-group-sm"},N={class:"input-group mb-3"},F=["onUpdate:modelValue","onChange"],z=["value"],H={class:"input-group-text",id:"basic-addon2"},M={class:"text-end"},O=b(()=>t("td",{colspan:"4",class:"text-end"},"總計",-1)),j={class:"text-end"},G={class:"B"},J={class:"bb"},K={class:"btn btn-outline-danger",type:"button",style:{width:"100%"}},Q={class:"bb"},W={class:"btn btn-danger",type:"button",style:{width:"100%"}};function X(e,o,r,Y,u,_){const x=m("RouterLink"),f=m("router-link");return d(),c("div",A,[t("div",E,[t("button",{class:"btn btn-outline-danger",style:{margin:"0px 0px 30px 0px"},type:"button",onClick:o[0]||(o[0]=s=>_.deleteCarts())}," 清空購物車 ")]),t("table",q,[T,t("tbody",null,[u.cart.carts?(d(!0),c(v,{key:0},y(u.cart.carts,s=>(d(),c("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:n=>_.deleteItem(s)},[R,g(" x ")],8,L)]),t("td",null,[t("div",S,[t("img",{class:"img-fluid",src:s.product.imageUrl,alt:"",style:{"background-size":"cover","background-position":"center",height:"150px",width:"150px"}},null,8,U)])]),t("td",null,[p(x,{to:`/product/${s.product.id}`},{default:h(()=>[t("button",B,a(s.product.title),1)]),_:2},1032,["to"])]),t("td",null,[t("div",D,[t("div",N,[$(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":n=>s.qty=n,onChange:n=>_.updataCartItem(s)},[(d(),c(v,null,y(50,n=>t("option",{value:n,key:`${n}123456`},a(n),9,z)),64))],40,F),[[k,s.qty]]),t("span",H,a(s.product.unit),1)])])]),t("td",M,a(s.total),1)]))),128)):I("",!0)]),t("tfoot",null,[t("tr",null,[O,t("td",j,a(u.cart.total),1)])])]),t("div",G,[t("div",J,[t("button",K,[p(f,{to:"/products",class:"not"},{default:h(()=>[g("繼續購物")]),_:1})])]),t("div",Q,[t("button",W,[p(f,{to:"/Form",class:"not",style:{color:"#fff"}},{default:h(()=>[g("立即結帳")]),_:1})])])])])}const tt=C(P,[["render",X],["__scopeId","data-v-fcf54252"]]);export{tt as default};
